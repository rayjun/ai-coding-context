---
name: refactor_safe
description: 在不改变行为的情况下安全地重组代码。
---

**步骤:**
1. **验证基线:** 确保所有现有的测试都通过。如果没有测试，首先创建一个“快照测试”或特征测试。
2. **计划变更:** 识别代码异味（长方法，大类，重复）。
3. **原子移动:** 分小步应用变更（例如，重命名，提取方法，移动类）。
4. **逐步验证:** 在 *每次* 原子变更后运行测试。
5. **清理:** 删除旧的未使用代码/注释。
